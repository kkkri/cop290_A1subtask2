<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>

  <body>
    <div class="form-container">
      <h2>Login</h2>
      <form
        id="loginForm"
        action="/login"
        method="post"
        onsubmit="return attemptLogin()"
      >
        <div class="form-group">
          <input type="text" name="username" placeholder="Username" required />
        </div>
        <div class="form-group">
          <input
            type="password"
            name="password"
            placeholder="Password"
            required
          />
        </div>
        <div class="form-group">
          <button type="submit">Login</button>
        </div>
      </form>
      <p>Don't have an account? <a href="/register">Register here</a></p>
    </div>
    <script>
      function attemptLogin() {
        const isSuccess = true;

        if (isSuccess) {
          createDynamicConfetti();
          return true;
        } else {
          alert("Login failed. Please check your credentials.");
          return false;
        }
      }

      function createDynamicConfetti() {
        const confettiContainer = document.createElement("div");
        confettiContainer.classList.add("confetti-container");
        document.body.appendChild(confettiContainer);

        const particleCount = 500;
        for (let i = 0; i < particleCount; i++) {
          createConfettiParticle(confettiContainer);
        }

        setTimeout(() => {
          document.body.removeChild(confettiContainer);
        }, 1000);
      }

      function createConfettiParticle(container) {
        const confettiParticle = document.createElement("div");
        confettiParticle.classList.add("confetti-particle");
        container.appendChild(confettiParticle);

        const initialX = Math.random() * window.innerWidth;
        const initialY = Math.random() * window.innerHeight;
        const size = Math.random() * 10 + 5;

        confettiParticle.style.width = size + "px";
        confettiParticle.style.height = size + "px";
        confettiParticle.style.background = getRandomColor();
        confettiParticle.style.position = "absolute";
        confettiParticle.style.left = initialX + "px";
        confettiParticle.style.top = initialY + "px";

        const animationDuration = Math.random() * 5 + 3;
        confettiParticle.style.transition = `transform ${animationDuration}s ease-out`;

        setTimeout(() => {
          const angle = Math.random() * 360;
          const distance = Math.random() * 200 + 100;
          const endX = initialX + distance * Math.cos(angle);
          const endY = initialY + distance * Math.sin(angle);

          confettiParticle.style.transform = `translate(${endX}px, ${endY}px) rotate(${
            Math.random() * 720
          }deg)`;
        }, 10);
      }

      function getRandomColor() {
        const letters = "0123456789ABCDEF";
        let color = "#";
        for (let i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }
    </script>
  </body>
</html>
